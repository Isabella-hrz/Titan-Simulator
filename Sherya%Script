local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local player = Players.LocalPlayer

local window = library:AddWindow("Sherya Script", {
    main_color = Color3.fromRGB(200, 0, 255),
    min_size = Vector2.new(660, 660),
    can_resize = false,
})

local mainTab = window:AddTab("Main")
local miscTab = window:AddTab("Misc")
local killerTab = window:AddTab("Killer")
local playersTab = window:AddTab("Players")
local creaditsTab = window:AddTab("Credits")

-- ░░░ VARIABLES ░░░
local autoEnabled = false
local autoClickLoop = false
local clickDelay = 0.1
local pauseAutoClick = false
local autoCollectEnabled = false
local autoCollectLoop
local characterConnection
local autoRebirth = false
local autoGolpeSeguro = false

-- ░░░ FUNCIONES DE EQUIPAMIENTO ░░░
local function equipFirstTool()
    local backpack = player:WaitForChild("Backpack")
    local character = player.Character or player.CharacterAdded:Wait()
    local maxAttempts = 10

    for attempt = 1, maxAttempts do
        local tool = backpack:FindFirstChildOfClass("Tool")
        if tool then
            tool.Parent = character
            print("Equipando la primera herramienta: "..tool.Name)
            return true
        else
            print("Intento "..attempt..": No se encontró ninguna herramienta")
            task.wait(0.3)
        end
    end

    print("No se pudo equipar herramienta.")
    return false
end

local function unequipFirstTool()
    local character = player.Character or player.CharacterAdded:Wait()
    local tool = character:FindFirstChildOfClass("Tool")
    if tool then
        tool.Parent = player.Backpack
    end
end

-- ░░░ AUTOGOLPE CON VIRTUALINPUT ░░░
local function startVirtualAutoClick()
    autoClickLoop = true
    task.spawn(function()
        while autoClickLoop do
            if not pauseAutoClick then
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
                VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
            end
            task.wait(clickDelay)
        end
    end)
end

local function stopVirtualAutoClick()
    autoClickLoop = false
end

local function onCharacterAdded()
    if autoEnabled then
        task.wait(0.5)
        equipFirstTool()
    end
end

-- ░░░ AUTOGOLPE SEGURO (Tool:Activate) ░░░
local function startSafeAutoGolpe()
    task.spawn(function()
        while autoGolpeSeguro do
            pcall(function()
                local character = player.Character or player.CharacterAdded:Wait()
                local backpack = player:WaitForChild("Backpack")

                local tool = character:FindFirstChildOfClass("Tool") or backpack:FindFirstChildOfClass("Tool")
                if tool then
                    tool.Parent = character
                    tool:Activate()
                end
            end)
            task.wait(0.1)
        end
    end)
end

-- ░░░ AUTO ORBES ░░░
local function startAutoCollect()
    autoCollectEnabled = true
    autoCollectLoop = task.spawn(function()
        while autoCollectEnabled do
            for _, v in pairs(game.Workspace:GetChildren()) do
                if v.Name == "Drop" and v:IsA("BasePart") then
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        v.CFrame = hrp.CFrame
                    end
                end
            end
            task.wait(1)
        end
    end)
end

local function stopAutoCollect()
    autoCollectEnabled = false
    if autoCollectLoop then
        autoCollectLoop:Cancel()
        autoCollectLoop = nil
    end
end

-- ░░░ EVENTOS DE INPUT PARA CHAT ░░░
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.T or input.KeyCode == Enum.KeyCode.Return then
        pauseAutoClick = true
    end
end)

UserInputService.InputEnded:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.T or input.KeyCode == Enum.KeyCode.Return then
        pauseAutoClick = false
    end
end)

-- ░░░ SWITCHES DE UI ░░░

mainTab:AddSwitch("Auto Golpe", function(enabled)
    autoEnabled = enabled

    if enabled then
        equipFirstTool()
        startVirtualAutoClick()
        characterConnection = player.CharacterAdded:Connect(onCharacterAdded)
        print("AutoGolpe activado")
    else
        unequipFirstTool()
        stopVirtualAutoClick()
        if characterConnection then
            characterConnection:Disconnect()
            characterConnection = nil
        end
        print("AutoGolpe desactivado")
    end
end)

mainTab:AddSwitch("Auto Golpe Seguro", function(state)
    autoGolpeSeguro = state

    if state then
        print("Auto Golpe Seguro activado")
        startSafeAutoGolpe()
    else
        print("Auto Golpe Seguro desactivado")
    end
end)

mainTab:AddSwitch("Auto Orb", function(enabled)
    if enabled then
        startAutoCollect()
        print("Auto colección de orbes activada")
    else
        stopAutoCollect()
        print("Auto colección de orbes desactivada")
    end
end)

mainTab:AddSwitch("Auto Renacimiento", function(state)
    autoRebirth = state
    task.spawn(function()
        while autoRebirth do
            pcall(function()
                local gui = player:WaitForChild("PlayerGui")

                local renacerButton = gui:FindFirstChild("RENACER", true)
                if renacerButton and renacerButton:IsA("TextButton") then
                    renacerButton:Activate()
                    task.wait(0.3)
                end

                for _, obj in pairs(gui:GetDescendants()) do
                    if obj:IsA("TextBox") and obj.PlaceholderText and obj.PlaceholderText:lower():find("type here") then
                        obj.Text = "yes"
                    end
                end

                local confirmarBtn = gui:FindFirstChild("CONFIRMAR", true)
                if confirmarBtn and confirmarBtn:IsA("TextButton") then
                    confirmarBtn:Activate()
                end
            end)
            task.wait(6)
        end
    end)
end)
