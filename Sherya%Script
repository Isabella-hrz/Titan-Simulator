local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
player.CharacterAdded:Connect(function(c) char = c end)

local window = library:AddWindow("Sherya Script", {
    main_color = Color3.fromRGB(200, 0, 255),
    min_size = Vector2.new(660, 660),
    can_resize = false,
})

local mainTab = window:AddTab("Main")

local autoPunch = false

-- Función para equipar la herramienta "Punch"
local function equipPunch()
    local backpack = player:WaitForChild("Backpack")
    local character = player.Character or player.CharacterAdded:Wait()
    local tool = backpack:FindFirstChild("Punch") or character:FindFirstChild("Punch")
    if tool and tool.Parent ~= character then
        tool.Parent = character
        task.wait(0.2)
    end
end

-- Evento que detecta cuando el personaje reaparece para reequipo
player.CharacterAdded:Connect(function()
    if autoPunch then
        task.wait(1) -- Espera que el personaje y mochila estén listos
        equipPunch()
    end
end)

mainTab:AddSwitch("Auto Punch", function(state)
    autoPunch = state

    if autoPunch then
        equipPunch()
    end

    task.spawn(function()
        while autoPunch do
            pcall(function()
                local character = player.Character or player.CharacterAdded:Wait()
                local tool = character:FindFirstChild("Punch")

                if tool then
                    tool:Activate()
                else
                    -- Si no está equipada, intentar equipar
                    equipPunch()
                end
            end)
            task.wait(0.1)
        end
    end)
end)

local autoOrb = false
local orbGuiCreado = false

mainTab:AddSwitch("Auto Orb", function(state)
    autoOrb = state

    -- Solo crea el mensaje visual una vez
    if not orbGuiCreado then
        local screenGui = Instance.new("ScreenGui")
        screenGui.Name = "Sherya"
        screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

        orbGuiCreado = true
    end

    -- Auto Orb loop
    task.spawn(function()
        while autoOrb do
            for _, v in pairs(workspace:GetChildren()) do
                if v.Name == "Drop" and v:IsA("BasePart") then
                    v.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                end
            end
            task.wait(1)
        end
    end)
end)

local autoRebirth = false

mainTab:AddSwitch("Auto Rebirth", function(state)
    autoRebirth = state

    task.spawn(function()
        while autoRebirth do
            pcall(function()
                local gui = player.PlayerGui

                -- Buscar botones Rebirth (TextButton)
                local buttons = {}
                for _, obj in pairs(gui:GetDescendants()) do
                    if obj:IsA("TextButton") and obj.Name == "Rebirth" then
                        table.insert(buttons, obj)
                    end
                end

                -- Debemos tener 2 botones "Rebirth"
                if #buttons >= 2 then
                    -- Presionar el primer botón "Rebirth" para abrir panel
                    buttons[1]:Activate()

                    task.wait(0.5)

                    -- Escribir "yes" en TextBox
                    local textBox = gui:FindFirstChild("TextBox", true)
                    if textBox and textBox:IsA("TextBox") then
                        textBox.Text = "yes"
                    end

                    task.wait(0.5)

                    -- Presionar el segundo botón "Rebirth" para confirmar
                    buttons[2]:Activate()
                end
            end)

            task.wait(5) -- esperar 5 segundos antes de intentar de nuevo
        end
    end)
end)
